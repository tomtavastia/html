
<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <title>Murtolukulaskujen Arviointilomake</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async
        src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
    </script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 40px;
        }
        .question {
            margin-bottom: 20px;
            text-align: left;
            max-width: 600px;
        }
        .question label {
            display: block;
            font-size: 18px;
            margin-bottom: 5px;
        }
        .question input {
            padding: 5px;
            font-size: 16px;
            width: 150px;
        }
        #results {
            margin-top: 40px;
            padding: 20px;
            border-top: 2px solid #ccc;
        }
        .correct {
            color: green;
        }
        .incorrect {
            color: red;
        }
    </style>
</head>
<body>
    <h1>Murtolukulaskujen Arviointilomake</h1>
    <form id="quizForm">
        <div class="question">
            <label>1. \( \frac{1}{2} + \frac{1}{3} \)</label>
            <input type="text" name="q1">
        </div>
        <div class="question">
            <label>2. \( \frac{3}{4} - \frac{2}{5} \)</label>
            <input type="text" name="q2">
        </div>
        <div class="question">
            <label>3. \( \frac{2}{3} \times \frac{3}{4} \)</label>
            <input type="text" name="q3">
        </div>
        <div class="question">
            <label>4. \( \frac{5}{6} \div \frac{2}{3} \)</label>
            <input type="text" name="q4">
        </div>
        <div class="question">
            <label>5. \( \frac{7}{8} + \frac{1}{8} \)</label>
            <input type="text" name="q5">
        </div>
        <div class="question">
            <label>6. \( \frac{4}{5} - \frac{1}{10} \)</label>
            <input type="text" name="q6">
        </div>
        <div class="question">
            <label>7. \( \frac{3}{7} + \frac{2}{7} \)</label>
            <input type="text" name="q7">
        </div>
        <div class="question">
            <label>8. \( \frac{6}{9} \times \frac{3}{2} \)</label>
            <input type="text" name="q8">
        </div>
        <div class="question">
            <label>9. \( \frac{9}{10} - \frac{2}{5} \)</label>
            <input type="text" name="q9">
        </div>
        <div class="question">
            <label>10. \( \frac{3}{4} + \frac{1}{2} \)</label>
            <input type="text" name="q10">
        </div>
        <button type="button" onclick="checkAnswers()">Tarkista vastaukset</button>
    </form>

    <div id="results"></div>

    <script>
        function simplifyFraction(numerator, denominator) {
            function gcd(a, b) {
                return b ? gcd(b, a % b) : a;
            }
            let factor = gcd(numerator, denominator);
            return [numerator / factor, denominator / factor];
        }

        function parseFraction(input) {
            input = input.trim();
            if (input.includes('/')) {
                let parts = input.split('/');
                let num = parseInt(parts[0]);
                let den = parseInt(parts[1]);
                if (!isNaN(num) && !isNaN(den) && den !== 0) {
                    let simplified = simplifyFraction(num, den);
                    return simplified[0] / simplified[1];
                }
            } else {
                let val = parseFloat(input);
                if (!isNaN(val)) return val;
            }
            return null;
        }

        function checkAnswers() {
            const correctAnswers = [
                5/6, 7/20, 1/2, 5/4, 1, 7/10, 5/7, 1, 1/2, 5/4
            ];
            const steps = [
                "\( \frac{1}{2} + \frac{1}{3} = \frac{3}{6} + \frac{2}{6} = \frac{5}{6} \)",
                "\( \frac{3}{4} - \frac{2}{5} = \frac{15}{20} - \frac{8}{20} = \frac{7}{20} \)",
                "\( \frac{2}{3} \times \frac{3}{4} = \frac{6}{12} = \frac{1}{2} \)",
                "\( \frac{5}{6} \div \frac{2}{3} = \frac{5}{6} \times \frac{3}{2} = \frac{15}{12} = \frac{5}{4} \)",
                "\( \frac{7}{8} + \frac{1}{8} = \frac{8}{8} = 1 \)",
                "\( \frac{4}{5} - \frac{1}{10} = \frac{8}{10} - \frac{1}{10} = \frac{7}{10} \)",
                "\( \frac{3}{7} + \frac{2}{7} = \frac{5}{7} \)",
                "\( \frac{6}{9} = \frac{2}{3}, \frac{2}{3} \times \frac{3}{2} = \frac{6}{6} = 1 \)",
                "\( \frac{9}{10} - \frac{2}{5} = \frac{9}{10} - \frac{4}{10} = \frac{5}{10} = \frac{1}{2} \)",
                "\( \frac{3}{4} + \frac{1}{2} = \frac{3}{4} + \frac{2}{4} = \frac{5}{4} \)"
            ];

            let resultsDiv = document.getElementById("results");
            resultsDiv.innerHTML = "<h2>Arviointi</h2>";

            for (let i = 0; i < 10; i++) {
                let userInput = document.forms["quizForm"]["q" + (i+1)].value;
                let userValue = parseFraction(userInput);
                let correctValue = correctAnswers[i];
                if (userValue !== null && Math.abs(userValue - correctValue) < 0.001) {
                    resultsDiv.innerHTML += `<p class="correct">Kysymys ${i+1}: Oikein!</p>`;
                } else {
                    resultsDiv.innerHTML += `<p class="incorrect">Kysymys ${i+1}: Väärin. ${steps[i]}</p>`;
                }
            }

            MathJax.typeset();
        }
    </script>
</body>
</html>
